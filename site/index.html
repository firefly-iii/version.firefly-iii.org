<!doctype html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Firefly III version</title>

    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <style>
        span.toggle {
            cursor: help;
        }

        /* Sticky footer styles
        -------------------------------------------------- */
        html {
            position: relative;
            min-height: 100%;
        }

        body {
            margin-bottom: 60px; /* Margin bottom by footer height */
        }

        .footer {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60px; /* Set the fixed height of the footer here */
            line-height: 60px; /* Vertically center the text there */
            background-color: #f5f5f5;
        }

    </style>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <h1>Firefly III release tracker</h1>
            <p>
                There are several tools in the <a href="https://github.com/firefly-iii/" title="Firefly III on GitHub"><strong>Firefly III</strong></a> ecosystem.
                On this page you can see which version is the last one.
            </p>
            <p>
                All of these tools come in three flavours (also "channels"):
                <span data-toggle="popover" title="Stable channel" data-content="Stable versions are guaranteed to work and have the least amount of bugs." class="toggle text-success">stable</span>,
                <span data-toggle="popover" title="BETA channel" data-content="BETA versions may have new features that won't work as well as you'd expect them to." class="toggle text-info">beta</span> and
                <span data-toggle="popover" title="ALPHA channel" data-content="ALPHA versions will contain the newest features, but may also contain code that breaks or crashes." class="toggle text-danger">alpha</span>.
            </p>
            <h2>
                Firefly III
            </h2>
            <dl>
                <dt class="text-success">stable</dt>
                <dd id="firefly_iii_stable">...</dd>
                <dt class="text-info">beta</dt>
                <dd id="firefly_iii_beta">...</dd>
                <dt class="text-danger">alpha</dt>
                <dd id="firefly_iii_alpha">...</dd>
            </dl>
            <h2>Firefly III Data Importer</h2>
            <dl>
                <dt class="text-success">stable</dt>
                <dd id="data_stable">...</dd>
                <dt class="text-info">beta</dt>
                <dd id="data_beta">...</dd>
                <dt class="text-danger">alpha</dt>
                <dd id="data_alpha">...</dd>
            </dl>
            <h2>JSON</h2>
            <p>
                <a href="./index.json" title="JSON variant">A JSON version of this page</a> is also available for all
                you robots out there.
            </p>
        </div>
    </div>
</div>
<footer class="footer">
    <div class="container">
        <span class="text-muted">&copy; <a href="mailto:james@firefly-iii.org">James Cole</a> | <a href="https://github.com/firefly-iii">GitHub</a> | <a href="https://www.firefly-iii.org/">firefly-iii.org</a></span>
    </div>
</footer>


<script src="./js/jquery-3.7.1.min.js"></script>
<script src="./js/popper.min.js"></script>
<script src="./js/bootstrap.bundle.min.js"></script>
<script type="text/javascript">
    $(function () {
        $('[data-toggle="popover"]').popover();
        // read json and put it on the page.
        $.getJSON('./index.json', function (data) {

            var tools = ['firefly_iii', 'data'];
            var channels = ['stable', 'beta', 'alpha'];
            for (var i = 0; i < tools.length; i++) {
                var tool = tools[i];
                console.log('Now at tool ' + tool);

                for (var j = 0; j < channels.length; j++) {
                    var channel = channels[j];
                    if (null == data[tool][channel].version) {
                        console.log('Tool ' + tool + ' has no ' + channel + ' version.');
                        $('#' + tool + '_' + channel).html($('<em>').text('No version in this channel.'));
                    }
                    if (null != data[tool][channel].version) {
                        console.log('Tool ' + tool + ' has ' + channel + ' version ' + data[tool][channel].version + '.');
                        $('#' + tool + '_' + channel).html($('<a>').attr('href', data[tool][channel].link).text(data[tool][channel].version));
                    }
                }
            }
        });
    });
</script>

<script type="text/javascript">
    var _paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function () {
        var u = "//analytics.firefly-iii.org/";
        _paq.push(['setTrackerUrl', u + 'matomo.php']);
        _paq.push(['setSiteId', '3']);
        var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
        g.type = 'text/javascript';
        g.async = true;
        g.defer = true;
        g.src = u + 'matomo.js';
        s.parentNode.insertBefore(g, s);
    })();
</script>

</body>
</html>
